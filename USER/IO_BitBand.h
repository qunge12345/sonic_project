#ifndef __IO_BITBAND__H
#define __IO_BITBAND__H

#include "stm32f10x.h"

#define BITBAND(addr, bitnum) ((addr & 0xF0000000)+0x2000000+((addr &0xFFFFF)<<5)+(bitnum<<2)) 
#define MEM_ADDR(addr)  *((volatile uint32_t  *)(addr)) 
#define BIT_ADDR(addr, bitnum)   MEM_ADDR(BITBAND(addr, bitnum)) 
//IO口地址映射
#define GPIOA_ODR_Addr    (GPIOA_BASE+12) //0x4001080C 
#define GPIOB_ODR_Addr    (GPIOB_BASE+12) //0x40010C0C 
#define GPIOC_ODR_Addr    (GPIOC_BASE+12) //0x4001100C 
#define GPIOD_ODR_Addr    (GPIOD_BASE+12) //0x4001140C 
#define GPIOE_ODR_Addr    (GPIOE_BASE+12) //0x4001180C 
#define GPIOF_ODR_Addr    (GPIOF_BASE+12) //0x40011A0C    
#define GPIOG_ODR_Addr    (GPIOG_BASE+12) //0x40011E0C    

#define GPIOA_IDR_Addr    (GPIOA_BASE+8) //0x40010808 
#define GPIOB_IDR_Addr    (GPIOB_BASE+8) //0x40010C08 
#define GPIOC_IDR_Addr    (GPIOC_BASE+8) //0x40011008 
#define GPIOD_IDR_Addr    (GPIOD_BASE+8) //0x40011408 
#define GPIOE_IDR_Addr    (GPIOE_BASE+8) //0x40011808 
#define GPIOF_IDR_Addr    (GPIOF_BASE+8) //0x40011A08 
#define GPIOG_IDR_Addr    (GPIOG_BASE+8) //0x40011E08 
 
//IO口操作,只对单一的IO口!
//确保n的值小于16!
#define PAout(n)   BIT_ADDR(GPIOA_ODR_Addr,n)  //输出 
#define PAin(n)    BIT_ADDR(GPIOA_IDR_Addr,n)  //输入
#define PA00in				*((volatile uint32_t  *)(0x42210100))
#define PA01in				*((volatile uint32_t  *)(0x42210104))
#define PA02in				*((volatile uint32_t  *)(0x42210108))
#define PA03in				*((volatile uint32_t  *)(0x4221010C))
#define PA04in				*((volatile uint32_t  *)(0x42210110))
#define PA05in				*((volatile uint32_t  *)(0x42210114))
#define PA06in				*((volatile uint32_t  *)(0x42210118))
#define PA07in				*((volatile uint32_t  *)(0x4221011C))
#define PA08in				*((volatile uint32_t  *)(0x42210120))
#define PA09in				*((volatile uint32_t  *)(0x42210124))
#define PA10in				*((volatile uint32_t  *)(0x42210128))
#define PA11in				*((volatile uint32_t  *)(0x4221012C))
#define PA12in				*((volatile uint32_t  *)(0x42210130))
#define PA13in				*((volatile uint32_t  *)(0x42210134))
#define PA14in				*((volatile uint32_t  *)(0x42210138))
#define PA15in				*((volatile uint32_t  *)(0x4221013C))
#define PA00out				*((volatile uint32_t  *)(0x42210180))
#define PA01out				*((volatile uint32_t  *)(0x42210184))
#define PA02out				*((volatile uint32_t  *)(0x42210188))
#define PA03out				*((volatile uint32_t  *)(0x4221018C))
#define PA04out				*((volatile uint32_t  *)(0x42210190))
#define PA05out				*((volatile uint32_t  *)(0x42210194))
#define PA06out				*((volatile uint32_t  *)(0x42210198))
#define PA07out				*((volatile uint32_t  *)(0x4221019C))
#define PA08out				*((volatile uint32_t  *)(0x422101A0))
#define PA09out				*((volatile uint32_t  *)(0x422101A4))
#define PA10out				*((volatile uint32_t  *)(0x422101A8))
#define PA11out				*((volatile uint32_t  *)(0x422101AC))
#define PA12out				*((volatile uint32_t  *)(0x422101B0))
#define PA13out				*((volatile uint32_t  *)(0x422101B4))
#define PA14out				*((volatile uint32_t  *)(0x422101B8))
#define PA15out				*((volatile uint32_t  *)(0x422101BC))

#define PBout(n)   		BIT_ADDR(GPIOB_ODR_Addr,n)  //输出 
#define PBin(n)    		BIT_ADDR(GPIOB_IDR_Addr,n)  //输入 
#define PB00in				*((volatile uint32_t  *)(0x42218100))
#define PB01in				*((volatile uint32_t  *)(0x42218104))
#define PB02in				*((volatile uint32_t  *)(0x42218108))
#define PB03in				*((volatile uint32_t  *)(0x4221810C))
#define PB04in				*((volatile uint32_t  *)(0x42218110))
#define PB05in				*((volatile uint32_t  *)(0x42218114))
#define PB06in				*((volatile uint32_t  *)(0x42218118))
#define PB07in				*((volatile uint32_t  *)(0x4221811C))
#define PB08in				*((volatile uint32_t  *)(0x42218120))
#define PB09in				*((volatile uint32_t  *)(0x42218124))
#define PB10in				*((volatile uint32_t  *)(0x42218128))
#define PB11in				*((volatile uint32_t  *)(0x4221812C))
#define PB12in				*((volatile uint32_t  *)(0x42218130))
#define PB13in				*((volatile uint32_t  *)(0x42218134))
#define PB14in				*((volatile uint32_t  *)(0x42218138))
#define PB15in				*((volatile uint32_t  *)(0x4221813C))
#define PB00out				*((volatile uint32_t  *)(0x42218180))
#define PB01out				*((volatile uint32_t  *)(0x42218184))
#define PB02out				*((volatile uint32_t  *)(0x42218188))
#define PB03out				*((volatile uint32_t  *)(0x4221818C))
#define PB04out				*((volatile uint32_t  *)(0x42218190))
#define PB05out				*((volatile uint32_t  *)(0x42218194))
#define PB06out				*((volatile uint32_t  *)(0x42218198))
#define PB07out				*((volatile uint32_t  *)(0x4221819C))
#define PB08out				*((volatile uint32_t  *)(0x422181A0))
#define PB09out				*((volatile uint32_t  *)(0x422181A4))
#define PB10out				*((volatile uint32_t  *)(0x422181A8))
#define PB11out				*((volatile uint32_t  *)(0x422181AC))
#define PB12out				*((volatile uint32_t  *)(0x422181B0))
#define PB13out				*((volatile uint32_t  *)(0x422181B4))
#define PB14out				*((volatile uint32_t  *)(0x422181B8))
#define PB15out				*((volatile uint32_t  *)(0x422181BC))

#define PCout(n)   BIT_ADDR(GPIOC_ODR_Addr,n)  //输出 
#define PCin(n)    BIT_ADDR(GPIOC_IDR_Addr,n)  //输入 
#define PC00in				*((volatile uint32_t  *)(0x42220100))
#define PC01in				*((volatile uint32_t  *)(0x42220104))
#define PC02in				*((volatile uint32_t  *)(0x42220108))
#define PC03in				*((volatile uint32_t  *)(0x4222010C))
#define PC04in				*((volatile uint32_t  *)(0x42220110))
#define PC05in				*((volatile uint32_t  *)(0x42220114))
#define PC06in				*((volatile uint32_t  *)(0x42220118))
#define PC07in				*((volatile uint32_t  *)(0x4222011C))
#define PC08in				*((volatile uint32_t  *)(0x42220120))
#define PC09in				*((volatile uint32_t  *)(0x42220124))
#define PC10in				*((volatile uint32_t  *)(0x42220128))
#define PC11in				*((volatile uint32_t  *)(0x4222012C))
#define PC12in				*((volatile uint32_t  *)(0x42220130))
#define PC13in				*((volatile uint32_t  *)(0x42220134))
#define PC14in				*((volatile uint32_t  *)(0x42220138))
#define PC15in				*((volatile uint32_t  *)(0x4222013C))
#define PC00out				*((volatile uint32_t  *)(0x42220180))
#define PC01out				*((volatile uint32_t  *)(0x42220184))
#define PC02out				*((volatile uint32_t  *)(0x42220188))
#define PC03out				*((volatile uint32_t  *)(0x4222018C))
#define PC04out				*((volatile uint32_t  *)(0x42220190))
#define PC05out				*((volatile uint32_t  *)(0x42220194))
#define PC06out				*((volatile uint32_t  *)(0x42220198))
#define PC07out				*((volatile uint32_t  *)(0x4222019C))
#define PC08out				*((volatile uint32_t  *)(0x422201A0))
#define PC09out				*((volatile uint32_t  *)(0x422201A4))
#define PC10out				*((volatile uint32_t  *)(0x422201A8))
#define PC11out				*((volatile uint32_t  *)(0x422201AC))
#define PC12out				*((volatile uint32_t  *)(0x422201B0))
#define PC13out				*((volatile uint32_t  *)(0x422201B4))
#define PC14out				*((volatile uint32_t  *)(0x422201B8))
#define PC15out				*((volatile uint32_t  *)(0x422201BC))

#define PDout(n)   BIT_ADDR(GPIOD_ODR_Addr,n)  //输出 
#define PDin(n)    BIT_ADDR(GPIOD_IDR_Addr,n)  //输入 
#define PD00in				*((volatile uint32_t  *)(0x42228100))
#define PD01in				*((volatile uint32_t  *)(0x42228104))
#define PD02in				*((volatile uint32_t  *)(0x42228108))
#define PD03in				*((volatile uint32_t  *)(0x4222810C))
#define PD04in				*((volatile uint32_t  *)(0x42228110))
#define PD05in				*((volatile uint32_t  *)(0x42228114))
#define PD06in				*((volatile uint32_t  *)(0x42228118))
#define PD07in				*((volatile uint32_t  *)(0x4222811C))
#define PD08in				*((volatile uint32_t  *)(0x42228120))
#define PD09in				*((volatile uint32_t  *)(0x42228124))
#define PD10in				*((volatile uint32_t  *)(0x42228128))
#define PD11in				*((volatile uint32_t  *)(0x4222812C))
#define PD12in				*((volatile uint32_t  *)(0x42228130))
#define PD13in				*((volatile uint32_t  *)(0x42228134))
#define PD14in				*((volatile uint32_t  *)(0x42228138))
#define PD15in				*((volatile uint32_t  *)(0x4222813C))
#define PD00out				*((volatile uint32_t  *)(0x42228180))
#define PD01out				*((volatile uint32_t  *)(0x42228184))
#define PD02out				*((volatile uint32_t  *)(0x42228188))
#define PD03out				*((volatile uint32_t  *)(0x4222818C))
#define PD04out				*((volatile uint32_t  *)(0x42228190))
#define PD05out				*((volatile uint32_t  *)(0x42228194))
#define PD06out				*((volatile uint32_t  *)(0x42228198))
#define PD07out				*((volatile uint32_t  *)(0x4222819C))
#define PD08out				*((volatile uint32_t  *)(0x422281A0))
#define PD09out				*((volatile uint32_t  *)(0x422281A4))
#define PD10out				*((volatile uint32_t  *)(0x422281A8))
#define PD11out				*((volatile uint32_t  *)(0x422281AC))
#define PD12out				*((volatile uint32_t  *)(0x422281B0))
#define PD13out				*((volatile uint32_t  *)(0x422281B4))
#define PD14out				*((volatile uint32_t  *)(0x422281B8))
#define PD15out				*((volatile uint32_t  *)(0x422281BC))

#define PEout(n)   BIT_ADDR(GPIOE_ODR_Addr,n)  //输出 
#define PEin(n)    BIT_ADDR(GPIOE_IDR_Addr,n)  //输入
#define PE00in				*((volatile uint32_t  *)(0x42230100))
#define PE01in				*((volatile uint32_t  *)(0x42230104))
#define PE02in				*((volatile uint32_t  *)(0x42230108))
#define PE03in				*((volatile uint32_t  *)(0x4223010C))
#define PE04in				*((volatile uint32_t  *)(0x42230110))
#define PE05in				*((volatile uint32_t  *)(0x42230114))
#define PE06in				*((volatile uint32_t  *)(0x42230118))
#define PE07in				*((volatile uint32_t  *)(0x4223011C))
#define PE08in				*((volatile uint32_t  *)(0x42230120))
#define PE09in				*((volatile uint32_t  *)(0x42230124))
#define PE10in				*((volatile uint32_t  *)(0x42230128))
#define PE11in				*((volatile uint32_t  *)(0x4223012C))
#define PE12in				*((volatile uint32_t  *)(0x42230130))
#define PE13in				*((volatile uint32_t  *)(0x42230134))
#define PE14in				*((volatile uint32_t  *)(0x42230138))
#define PE15in				*((volatile uint32_t  *)(0x4223013C))
#define PE00out				*((volatile uint32_t  *)(0x42230180))
#define PE01out				*((volatile uint32_t  *)(0x42230184))
#define PE02out				*((volatile uint32_t  *)(0x42230188))
#define PE03out				*((volatile uint32_t  *)(0x4223018C))
#define PE04out				*((volatile uint32_t  *)(0x42230190))
#define PE05out				*((volatile uint32_t  *)(0x42230194))
#define PE06out				*((volatile uint32_t  *)(0x42230198))
#define PE07out				*((volatile uint32_t  *)(0x4223019C))
#define PE08out				*((volatile uint32_t  *)(0x422301A0))
#define PE09out				*((volatile uint32_t  *)(0x422301A4))
#define PE10out				*((volatile uint32_t  *)(0x422301A8))
#define PE11out				*((volatile uint32_t  *)(0x422301AC))
#define PE12out				*((volatile uint32_t  *)(0x422301B0))
#define PE13out				*((volatile uint32_t  *)(0x422301B4))
#define PE14out				*((volatile uint32_t  *)(0x422301B8))
#define PE15out				*((volatile uint32_t  *)(0x422301BC))

#define PFout(n)   BIT_ADDR(GPIOF_ODR_Addr,n)  //输出 
#define PFin(n)    BIT_ADDR(GPIOF_IDR_Addr,n)  //输入
#define PF00in				*((volatile uint32_t  *)(0x42238100))
#define PF01in				*((volatile uint32_t  *)(0x42238104))
#define PF02in				*((volatile uint32_t  *)(0x42238108))
#define PF03in				*((volatile uint32_t  *)(0x4223810C))
#define PF04in				*((volatile uint32_t  *)(0x42238110))
#define PF05in				*((volatile uint32_t  *)(0x42238114))
#define PF06in				*((volatile uint32_t  *)(0x42238118))
#define PF07in				*((volatile uint32_t  *)(0x4223811C))
#define PF08in				*((volatile uint32_t  *)(0x42238120))
#define PF09in				*((volatile uint32_t  *)(0x42238124))
#define PF10in				*((volatile uint32_t  *)(0x42238128))
#define PF11in				*((volatile uint32_t  *)(0x4223812C))
#define PF12in				*((volatile uint32_t  *)(0x42238130))
#define PF13in				*((volatile uint32_t  *)(0x42238134))
#define PF14in				*((volatile uint32_t  *)(0x42238138))
#define PF15in				*((volatile uint32_t  *)(0x4223813C))
#define PF00out				*((volatile uint32_t  *)(0x42238180))
#define PF01out				*((volatile uint32_t  *)(0x42238184))
#define PF02out				*((volatile uint32_t  *)(0x42238188))
#define PF03out				*((volatile uint32_t  *)(0x4223818C))
#define PF04out				*((volatile uint32_t  *)(0x42238190))
#define PF05out				*((volatile uint32_t  *)(0x42238194))
#define PF06out				*((volatile uint32_t  *)(0x42238198))
#define PF07out				*((volatile uint32_t  *)(0x4223819C))
#define PF08out				*((volatile uint32_t  *)(0x422381A0))
#define PF09out				*((volatile uint32_t  *)(0x422381A4))
#define PF10out				*((volatile uint32_t  *)(0x422381A8))
#define PF11out				*((volatile uint32_t  *)(0x422381AC))
#define PF12out				*((volatile uint32_t  *)(0x422381B0))
#define PF13out				*((volatile uint32_t  *)(0x422381B4))
#define PF14out				*((volatile uint32_t  *)(0x422381B8))
#define PF15out				*((volatile uint32_t  *)(0x422381BC))

#define PGout(n)   BIT_ADDR(GPIOG_ODR_Addr,n)  //输出 
#define PGin(n)    BIT_ADDR(GPIOG_IDR_Addr,n)  //输入
#define PG00in				*((volatile uint32_t  *)(0x42240100))
#define PG01in				*((volatile uint32_t  *)(0x42240104))
#define PG02in				*((volatile uint32_t  *)(0x42240108))
#define PG03in				*((volatile uint32_t  *)(0x4224010C))
#define PG04in				*((volatile uint32_t  *)(0x42240110))
#define PG05in				*((volatile uint32_t  *)(0x42240114))
#define PG06in				*((volatile uint32_t  *)(0x42240118))
#define PG07in				*((volatile uint32_t  *)(0x4224011C))
#define PG08in				*((volatile uint32_t  *)(0x42240120))
#define PG09in				*((volatile uint32_t  *)(0x42240124))
#define PG10in				*((volatile uint32_t  *)(0x42240128))
#define PG11in				*((volatile uint32_t  *)(0x4224012C))
#define PG12in				*((volatile uint32_t  *)(0x42240130))
#define PG13in				*((volatile uint32_t  *)(0x42240134))
#define PG14in				*((volatile uint32_t  *)(0x42240138))
#define PG15in				*((volatile uint32_t  *)(0x4224013C))
#define PG00out				*((volatile uint32_t  *)(0x42240180))
#define PG01out				*((volatile uint32_t  *)(0x42240184))
#define PG02out				*((volatile uint32_t  *)(0x42240188))
#define PG03out				*((volatile uint32_t  *)(0x4224018C))
#define PG04out				*((volatile uint32_t  *)(0x42240190))
#define PG05out				*((volatile uint32_t  *)(0x42240194))
#define PG06out				*((volatile uint32_t  *)(0x42240198))
#define PG07out				*((volatile uint32_t  *)(0x4224019C))
#define PG08out				*((volatile uint32_t  *)(0x422401A0))
#define PG09out				*((volatile uint32_t  *)(0x422401A4))
#define PG10out				*((volatile uint32_t  *)(0x422401A8))
#define PG11out				*((volatile uint32_t  *)(0x422401AC))
#define PG12out				*((volatile uint32_t  *)(0x422401B0))
#define PG13out				*((volatile uint32_t  *)(0x422401B4))
#define PG14out				*((volatile uint32_t  *)(0x422401B8))
#define PG15out				*((volatile uint32_t  *)(0x422401BC))

#endif

